!function(e){var t=window.webpackHotUpdate;window.webpackHotUpdate=function(e,n){!function(e,t){if(!H[e]||!T[e])return;for(var n in T[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(f[n]=t[n]);0==--w&&0===m&&g()}(e,n),t&&t(e,n)};var n,r=!0,o="ec2377fc8b27459eca36",i={},a=[],c=[];function s(e){var t=O[e];if(!t)return D;var r=function(r){return t.hot.active?(O[r]?-1===O[r].parents.indexOf(e)&&O[r].parents.push(e):(a=[e],n=r),-1===t.children.indexOf(r)&&t.children.push(r)):(console.warn("[HMR] unexpected require("+r+") from disposed module "+e),a=[]),D(r)},o=function(e){return{configurable:!0,enumerable:!0,get:function(){return D[e]},set:function(t){D[e]=t}}};for(var i in D)Object.prototype.hasOwnProperty.call(D,i)&&"e"!==i&&"t"!==i&&Object.defineProperty(r,i,o(i));return r.e=function(e){return"ready"===h&&d("prepare"),m++,D.e(e).then(t,(function(e){throw t(),e}));function t(){m--,"prepare"===h&&(y[e]||x(e),0===m&&0===w&&g())}},r.t=function(e,t){return 1&t&&(e=r(e)),D.t(e,-2&t)},r}function l(t){var r={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:n!==t,active:!0,accept:function(e,t){if(void 0===e)r._selfAccepted=!0;else if("function"==typeof e)r._selfAccepted=e;else if("object"==typeof e)for(var n=0;n<e.length;n++)r._acceptedDependencies[e[n]]=t||function(){};else r._acceptedDependencies[e]=t||function(){}},decline:function(e){if(void 0===e)r._selfDeclined=!0;else if("object"==typeof e)for(var t=0;t<e.length;t++)r._declinedDependencies[e[t]]=!0;else r._declinedDependencies[e]=!0},dispose:function(e){r._disposeHandlers.push(e)},addDisposeHandler:function(e){r._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=r._disposeHandlers.indexOf(e);t>=0&&r._disposeHandlers.splice(t,1)},invalidate:function(){switch(this._selfInvalidated=!0,h){case"idle":(f={})[t]=e[t],d("ready");break;case"ready":M(t);break;case"prepare":case"check":case"dispose":case"apply":(v=v||[]).push(t)}},check:V,apply:P,status:function(e){if(!e)return h;u.push(e)},addStatusHandler:function(e){u.push(e)},removeStatusHandler:function(e){var t=u.indexOf(e);t>=0&&u.splice(t,1)},data:i[t]};return n=void 0,r}var u=[],h="idle";function d(e){h=e;for(var t=0;t<u.length;t++)u[t].call(null,e)}var E,f,p,v,w=0,m=0,y={},T={},H={};function R(e){return+e+""===e?+e:e}function V(e){if("idle"!==h)throw new Error("check() is only allowed in idle status");return r=e,d("check"),(t=1e4,t=t||1e4,new Promise((function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,i=D.p+""+o+".hot-update.json";r.open("GET",i,!0),r.timeout=t,r.send(null)}catch(e){return n(e)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+i+" timed out."));else if(404===r.status)e();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+i+" failed."));else{try{var t=JSON.parse(r.responseText)}catch(e){return void n(e)}e(t)}}}))).then((function(e){if(!e)return d(b()?"ready":"idle"),null;T={},y={},H=e.c,p=e.h,d("prepare");var t=new Promise((function(e,t){E={resolve:e,reject:t}}));f={};return x(0),"prepare"===h&&0===m&&0===w&&g(),t}));var t}function x(e){H[e]?(T[e]=!0,w++,function(e){var t=document.createElement("script");t.charset="utf-8",t.src=D.p+""+e+"."+o+".hot-update.js",document.head.appendChild(t)}(e)):y[e]=!0}function g(){d("ready");var e=E;if(E=null,e)if(r)Promise.resolve().then((function(){return P(r)})).then((function(t){e.resolve(t)}),(function(t){e.reject(t)}));else{var t=[];for(var n in f)Object.prototype.hasOwnProperty.call(f,n)&&t.push(R(n));e.resolve(t)}}function P(t){if("ready"!==h)throw new Error("apply() is only allowed in ready status");return function t(r){var c,s,l,u,h;function E(e){for(var t=[e],n={},r=t.map((function(e){return{chain:[e],id:e}}));r.length>0;){var o=r.pop(),i=o.id,a=o.chain;if((u=O[i])&&(!u.hot._selfAccepted||u.hot._selfInvalidated)){if(u.hot._selfDeclined)return{type:"self-declined",chain:a,moduleId:i};if(u.hot._main)return{type:"unaccepted",chain:a,moduleId:i};for(var c=0;c<u.parents.length;c++){var s=u.parents[c],l=O[s];if(l){if(l.hot._declinedDependencies[i])return{type:"declined",chain:a.concat([s]),moduleId:i,parentId:s};-1===t.indexOf(s)&&(l.hot._acceptedDependencies[i]?(n[s]||(n[s]=[]),w(n[s],[i])):(delete n[s],t.push(s),r.push({chain:a.concat([s]),id:s})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}b();var m={},y=[],T={},V=function(){console.warn("[HMR] unexpected require("+g.moduleId+") to disposed module")};for(var x in f)if(Object.prototype.hasOwnProperty.call(f,x)){var g;h=R(x),g=f[x]?E(h):{type:"disposed",moduleId:x};var P=!1,M=!1,k=!1,j="";switch(g.chain&&(j="\nUpdate propagation: "+g.chain.join(" -> ")),g.type){case"self-declined":r.onDeclined&&r.onDeclined(g),r.ignoreDeclined||(P=new Error("Aborted because of self decline: "+g.moduleId+j));break;case"declined":r.onDeclined&&r.onDeclined(g),r.ignoreDeclined||(P=new Error("Aborted because of declined dependency: "+g.moduleId+" in "+g.parentId+j));break;case"unaccepted":r.onUnaccepted&&r.onUnaccepted(g),r.ignoreUnaccepted||(P=new Error("Aborted because "+h+" is not accepted"+j));break;case"accepted":r.onAccepted&&r.onAccepted(g),M=!0;break;case"disposed":r.onDisposed&&r.onDisposed(g),k=!0;break;default:throw new Error("Unexception type "+g.type)}if(P)return d("abort"),Promise.reject(P);if(M)for(h in T[h]=f[h],w(y,g.outdatedModules),g.outdatedDependencies)Object.prototype.hasOwnProperty.call(g.outdatedDependencies,h)&&(m[h]||(m[h]=[]),w(m[h],g.outdatedDependencies[h]));k&&(w(y,[g.moduleId]),T[h]=V)}var _,I=[];for(s=0;s<y.length;s++)h=y[s],O[h]&&O[h].hot._selfAccepted&&T[h]!==V&&!O[h].hot._selfInvalidated&&I.push({module:h,parents:O[h].parents.slice(),errorHandler:O[h].hot._selfAccepted});d("dispose"),Object.keys(H).forEach((function(e){!1===H[e]&&function(e){delete installedChunks[e]}(e)}));var C,S,z=y.slice();for(;z.length>0;)if(h=z.pop(),u=O[h]){var A={},L=u.hot._disposeHandlers;for(l=0;l<L.length;l++)(c=L[l])(A);for(i[h]=A,u.hot.active=!1,delete O[h],delete m[h],l=0;l<u.children.length;l++){var W=O[u.children[l]];W&&((_=W.parents.indexOf(h))>=0&&W.parents.splice(_,1))}}for(h in m)if(Object.prototype.hasOwnProperty.call(m,h)&&(u=O[h]))for(S=m[h],l=0;l<S.length;l++)C=S[l],(_=u.children.indexOf(C))>=0&&u.children.splice(_,1);d("apply"),void 0!==p&&(o=p,p=void 0);for(h in f=void 0,T)Object.prototype.hasOwnProperty.call(T,h)&&(e[h]=T[h]);var q=null;for(h in m)if(Object.prototype.hasOwnProperty.call(m,h)&&(u=O[h])){S=m[h];var B=[];for(s=0;s<S.length;s++)if(C=S[s],c=u.hot._acceptedDependencies[C]){if(-1!==B.indexOf(c))continue;B.push(c)}for(s=0;s<B.length;s++){c=B[s];try{c(S)}catch(e){r.onErrored&&r.onErrored({type:"accept-errored",moduleId:h,dependencyId:S[s],error:e}),r.ignoreErrored||q||(q=e)}}}for(s=0;s<I.length;s++){var U=I[s];h=U.module,a=U.parents,n=h;try{D(h)}catch(e){if("function"==typeof U.errorHandler)try{U.errorHandler(e)}catch(t){r.onErrored&&r.onErrored({type:"self-accept-error-handler-errored",moduleId:h,error:t,originalError:e}),r.ignoreErrored||q||(q=t),q||(q=e)}else r.onErrored&&r.onErrored({type:"self-accept-errored",moduleId:h,error:e}),r.ignoreErrored||q||(q=e)}}if(q)return d("fail"),Promise.reject(q);if(v)return t(r).then((function(e){return y.forEach((function(t){e.indexOf(t)<0&&e.push(t)})),e}));return d("idle"),new Promise((function(e){e(y)}))}(t=t||{})}function b(){if(v)return f||(f={}),v.forEach(M),v=void 0,!0}function M(t){Object.prototype.hasOwnProperty.call(f,t)||(f[t]=e[t])}var O={};function D(t){if(O[t])return O[t].exports;var n=O[t]={i:t,l:!1,exports:{},hot:l(t),parents:(c=a,a=[],c),children:[]};return e[t].call(n.exports,n,n.exports,s(t)),n.l=!0,n.exports}D.m=e,D.c=O,D.d=function(e,t,n){D.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},D.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},D.t=function(e,t){if(1&t&&(e=D(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(D.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)D.d(n,r,function(t){return e[t]}.bind(null,r));return n},D.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return D.d(t,"a",t),t},D.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},D.p="",D.h=function(){return o},s("./src/main.js")(D.s="./src/main.js")}({"./src/main.js":function(e,t,n){"use strict";n.r(t);var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"vertexShader",value:function(e,t,n,r){return r.applyMatrix4(e).applyMatrix4(t).applyMatrix4(n)}},{key:"prespectiveDivide",value:function(e){var t=new THREE.Vector4(0,0,0);t.x=e.clipPos.x/e.clipPos.w,t.y=e.clipPos.y/e.clipPos.w,t.z=e.clipPos.z/e.clipPos.w,t.w=e.clipPos.w,e.ndcPos=t}},{key:"ndcToScreen",value:function(e,t,n){var r=new THREE.Vector2(0,0);r.x=(e.ndcPos.x+1)/2*t-.5,r.y=(e.ndcPos.y+1)/2*n-.5,e.screenPos=r}},{key:"fragmentShader",value:function(e,t,n){}}]),e}();var i=function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.position=t||new THREE.Vector4,this.uv=o||new THREE.Vector2,this.color=n||new THREE.Vector3(0,0,0),this.normal=r||new THREE.Vector3(0,1,0),this.screenPos=void 0};new THREE.Vector3(0,1,-1),new THREE.Vector3(-1,0,-1),new THREE.Vector3(0,-1,-1),new THREE.Vector3(1,0,-1);var a=[new THREE.Vector4(0,0,1,1),new THREE.Vector4(1,0,0,1),new THREE.Vector4(-1,0,0,1)];function c(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w}function s(e,t,n){for(var r=[e,t,n],o=[],i=0;i<a.length;i++){o.length=0,o=r.slice(0,r.length),r.length=0;for(var s=0;s<o.length;s++){var u=c(a[i],o[s].ndcPos),h=(s+o.length+1)%o.length,d=c(a[i],o[h].ndcPos);if(u>=0){if(r.push(o[s]),d<0){var E=u/(u-d),f=l(o[s],o[h],E);r.push(f)}}else if(d>=0){var p=d/(d-u),v=l(o[h],o[s],p);r.push(v)}}}return r}function l(e,t,n){var r=new i;return r.ndcPos||(r.ndcPos=new THREE.Vector4),r.clipPos||(r.clipPos=new THREE.Vector4),r.ndcPos.lerpVectors(e.ndcPos,t.ndcPos,n),r.clipPos.lerpVectors(e.clipPos,t.clipPos,n),r.uv.lerpVectors(e.uv,t.uv,n),r.color.lerpVectors(e.color,t.color,n),r.normal.lerpVectors(e.normal,t.normal,n),r}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var h=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.canvasWidth=this.canvas.width,this.canvasHeight=this.canvas.height,console.log("this.canvasWidth:"+this.canvasWidth),console.log("this.canvasHeight:"+this.canvasHeight),this.myImageData=this.ctx.getImageData(0,0,this.canvasWidth,this.canvasHeight),this.zBuffer=[],this.clearBackground(),this.screenTrigles=[];var r=new Image;r.src="./1.jpg",r.onload=function(){n.imgCanvas=document.getElementById("imgCanvas");var e=n.imgCanvas.getContext("2d");e.drawImage(r,0,0,300,227),n.imageDataTexture=e.getImageData(0,0,300,227),console.log(n.imageDataTexture),n.textureWidth=300,n.textureHeight=227}}return u(e,[{key:"clearBackground",value:function(){for(var e=this.canvasHeight*this.canvasWidth,t=0;t<e;t++)this.myImageData.data[4*t+0]=0,this.myImageData.data[4*t+1]=0,this.myImageData.data[4*t+2]=0,this.myImageData.data[4*t+3]=255}},{key:"transformObjectToScreen",value:function(e,t){var n=e.meshList,r=!0,i=!1,a=void 0;try{for(var c,l=n[Symbol.iterator]();!(r=(c=l.next()).done);r=!0)for(var u=c.value,h=(u.vertexPointList,u.vertIndices.length/3),d=0;d<h;d++){var E=u.vertexPointList[3*d],f=u.vertexPointList[3*d+1],p=u.vertexPointList[3*d+2];E.clipPos=o.vertexShader(u.modelMatrix,t.viewMatrix,t.projectionMatrix,E.position.clone()),f.clipPos=o.vertexShader(u.modelMatrix,t.viewMatrix,t.projectionMatrix,f.position.clone()),p.clipPos=o.vertexShader(u.modelMatrix,t.viewMatrix,t.projectionMatrix,p.position.clone()),o.prespectiveDivide(E),o.prespectiveDivide(f),o.prespectiveDivide(p);for(var v=s(E,f,p),w=v.length-2,m=0;m<w;m++){var y=v[0],T=v[m+1],H=v[m+2];o.ndcToScreen(y,this.canvasWidth,this.canvasHeight),o.ndcToScreen(T,this.canvasWidth,this.canvasHeight),o.ndcToScreen(H,this.canvasWidth,this.canvasHeight),this.drawTriangle(y,T,H)}}}catch(e){i=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw a}}}},{key:"render",value:function(e,t){this.scene=e,this.clearBackground(),this.zBuffer.length=0,this.transformObjectToScreen(e,t),this.ctx.putImageData(this.myImageData,0,0)}},{key:"faceCulling",value:function(e,t,n){var r=t.screenPos.clone().sub(e.screenPos),o=n.screenPos.clone().sub(e.screenPos),i=new THREE.Vector3(r.x,r.y,r.z),a=new THREE.Vector3(o.x,o.y,o.z);return i.cross(a),i.dot(new THREE.Vector3(0,0,1))<0}},{key:"drawTriangle",value:function(e,t,n){for(var r=Math.min(Math.floor(e.screenPos.x),Math.min(Math.floor(t.screenPos.x),Math.floor(n.screenPos.x))),o=Math.max(Math.ceil(e.screenPos.x),Math.max(Math.ceil(t.screenPos.x),Math.ceil(n.screenPos.x))),i=Math.min(Math.floor(e.screenPos.y),Math.min(Math.floor(t.screenPos.y),Math.floor(n.screenPos.y))),a=Math.max(Math.ceil(e.screenPos.y),Math.max(Math.ceil(t.screenPos.y),Math.ceil(n.screenPos.y))),c=r;c<o;c++)for(var s=i;s<a;s++){var l=new THREE.Vector2(c,s),u=new THREE.Vector3(0,0,0);this.checkoutOnePointInTriangle(e,t,n,l,u)&&this.drawPoint(c,s,l.z,e,t,n,u)}}},{key:"drawPoint",value:function(e,t,n,r,o,i,a){var c=this.canvasHeight-t-1,s=c*this.canvasWidth+e;if(!(null!=this.zBuffer[s]&&this.zBuffer[s]<n)){this.zBuffer[s]=n;var l=c*(4*this.canvasWidth)+4*e,u=l+1,h=u+1,d=h+1;this.myImageData.data[d]=255;var E=r.color,f=o.color,p=i.color,v=r.normal.clone().multiplyScalar(a.x).normalize(),w=o.normal.clone().multiplyScalar(a.y).normalize(),m=i.normal.clone().multiplyScalar(a.z).normalize();v.add(w).add(m).normalize();var y=v.dot(this.scene.directionOri);y<0&&(y=0);var T=this.scene.directionColor.clone().multiplyScalar(y),H=E.x*a.x+f.x*a.y+p.x*a.z,R=E.y*a.x+f.y*a.y+p.y*a.z,V=E.z*a.x+f.z*a.y+p.z*a.z,x=new THREE.Vector3(H,R,V),g=(this.scene.ambientColor.clone().multiplyScalar(.2).add(T.multiplyScalar(.6)).add(x.multiplyScalar(.2)),a.x/r.ndcPos.w+a.y/o.ndcPos.w+a.z/i.ndcPos.w),P=r.uv.x*a.x/r.ndcPos.w+o.uv.x*a.y/o.ndcPos.w+a.z*i.uv.x/i.ndcPos.w,b=r.uv.y*a.x/r.ndcPos.w+o.uv.y*a.y/o.ndcPos.w+a.z*i.uv.y/i.ndcPos.w;if(this.imageDataTexture){var M=this.tex2D(P/g,b/g);this.myImageData.data[l]=M[0],this.myImageData.data[u]=M[1],this.myImageData.data[h]=M[2],this.myImageData.data[d]=M[3]}}}},{key:"tex2D",value:function(e,t){e=Math.abs(e%1),t=Math.abs(t%1);var n=parseInt(e*this.textureWidth),r=parseInt(t*this.textureHeight)*(4*this.textureWidth)+4*n,o=r+1,i=o+1,a=i+1;return[this.imageDataTexture.data[r],this.imageDataTexture.data[o],this.imageDataTexture.data[i],this.imageDataTexture.data[a]]}},{key:"checkoutOnePointInTriangle",value:function(e,t,n,r,o){var i=r.clone().sub(e.screenPos),a=t.screenPos.clone().sub(e.screenPos),c=n.screenPos.clone().sub(e.screenPos),s=i.dot(a),l=a.dot(a),u=c.dot(a),h=i.dot(c),d=a.dot(c),E=c.dot(c),f=l*E-u*d,p=(s*E-u*h)/f,v=(l*h-s*d)/f;return p>=0&&v>=0&&p+v<=1&&(o.set(1-p-v,p,v),r.z=e.clipPos.z*(1-p-v)+t.clipPos.z*p+n.clipPos.z*v,!0)}}]),e}(),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var E=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.position=new THREE.Vector3(0,0,7),this.quaternion=new THREE.Quaternion,this.quaternion.setFromAxisAngle(new THREE.Vector3(0,1,0),0),this.fov=t,this.nearPlane=r,this.farPlane=o,this.aspect=n,this.udpateViewMatrix(),this.updateProjectMatrix()}return d(e,[{key:"udpateViewMatrix",value:function(){this.cameraMatrix=new THREE.Matrix4,this.cameraMatrix.compose(this.position,this.quaternion,new THREE.Vector3(1,1,1)),this.viewMatrix=new THREE.Matrix4,this.viewMatrix.getInverse(this.cameraMatrix)}},{key:"setCameraMatrix",value:function(e){this.cameraMatrix.copy(e);var t=new THREE.Vector3(1,1,1);this.cameraMatrix.decompose(this.position,this.quaternion,t),this.udpateViewMatrix()}},{key:"updateProjectMatrix",value:function(){this.projectionMatrix=new THREE.Matrix4,this.projectionMatrix2=new THREE.Matrix4;var e=THREE.Math.degToRad(this.fov),t=1/Math.tan(e/2),n=(this.nearPlane+this.farPlane)/(this.nearPlane-this.farPlane),r=2*this.farPlane*this.nearPlane/(this.nearPlane-this.farPlane);this.projectionMatrix.set(t/this.aspect,0,0,0,0,t,0,0,0,0,n,r,0,0,-1,0)}}]),e}(),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.meshList=[],this.ambientColor=new THREE.Vector3(255,255,255),this.ambientatend=.2,this.directionColor=new THREE.Vector3(255,0,0),this.directionOri=new THREE.Vector3(.2,1,0),this.directionOri.normalize()}return f(e,[{key:"add",value:function(e){this.meshList.push(e)}}]),e}(),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var w=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.position=t,this.quaternion=n,this.vertexColor=[],this.vertIndices=[],this.normalList=[],this.vertexPointList=[],this.uvList=[],this.modelMatrix=new THREE.Matrix4,this.updateModelMatrix()}return v(e,[{key:"setVerticesList",value:function(e,t){this.vertList=e,this.vertexColor=t}},{key:"updateModelMatrix",value:function(){this.modelMatrix.compose(this.position,this.quaternion,new THREE.Vector3(1,1,1))}},{key:"calculateNormals",value:function(){for(var e=this.vertIndices.length,t=0;t<e;t+=3){var n=this.vertList[this.vertIndices[t]],r=this.vertList[this.vertIndices[t+1]],o=this.vertList[this.vertIndices[t+2]],i=new THREE.Vector3(n.x,n.y,n.z),a=new THREE.Vector3(r.x,r.y,r.z),c=new THREE.Vector3(o.x,o.y,o.z),s=a.clone().sub(i).cross(c.clone().sub(i)),l=i.clone().sub(a).cross(c.clone().sub(a)),u=i.clone().sub(c).cross(a.clone().sub(c));this.normalList.push(s),this.normalList.push(l),this.normalList.push(u)}}},{key:"generateMesh",value:function(){for(var e=0;e<36;e++){var t=new i(this.vertList[e],this.vertexColor[e],this.normalList[e],this.uvList[e]);this.vertexPointList.push(t)}}}]),e}(),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var y=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.camera=t,this.isMoving=!1,this.canvasWidth=n.width,this.canvasHeight=n.height,this.mosueStartPos=new THREE.Vector2(0,0),n.ontouchstart=n.onmousedown=function(e){r.isMoving=!0;var t=e.clientX||e.touches[0].clientX,n=e.clientY||e.touches[0].clientY;r.mosueStartPos.set(t,n)},n.ontouchmove=n.onmousemove=function(e){if(r.isMoving){var t=e.clientX||e.touches[0].clientX,n=e.clientY||e.touches[0].clientY,o=new THREE.Vector2(t-r.mosueStartPos.x,n-r.mosueStartPos.y);r.rotateCamera(o.multiplyScalar(3)),r.mosueStartPos.set(t,n)}},n.ontouchend=n.onmouseup=function(e){r.isMoving=!1},n.onmousewheel=n.onmousewheel=function(e){var t=e.wheelDelta||e.detail;r.moveCamera(t)}}return m(e,[{key:"moveCamera",value:function(e){var t=new THREE.Matrix4;t.makeTranslation(0,0,.001*e);var n=this.camera.cameraMatrix.clone();n.multiply(t),this.camera.setCameraMatrix(n)}},{key:"rotateCamera",value:function(e){var t=e.x/this.canvasWidth,n=e.y/this.canvasHeight,r=this.camera.cameraMatrix,o=new THREE.Vector3(r.elements[4],r.elements[5],r.elements[6]),i=new THREE.Vector3(r.elements[0],r.elements[1],r.elements[2]),a=new THREE.Matrix4,c=new THREE.Matrix4;c.makeRotationAxis(i,-n),a.makeRotationAxis(o,-t),c.multiply(a.multiply(r)),this.camera.setCameraMatrix(c)}}]),e}(),T=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0};var H=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r)),i=0;i<36;i++)o.vertIndices.push(i);return o.vertList=[new THREE.Vector4(-.5,-.5,.5,1),new THREE.Vector4(-.5,.5,.5,1),new THREE.Vector4(.5,.5,.5,1),new THREE.Vector4(.5,.5,.5,1),new THREE.Vector4(.5,-.5,.5,1),new THREE.Vector4(-.5,-.5,.5,1),new THREE.Vector4(-.5,-.5,-.5,1),new THREE.Vector4(.5,.5,-.5,1),new THREE.Vector4(-.5,.5,-.5,1),new THREE.Vector4(.5,.5,-.5,1),new THREE.Vector4(-.5,-.5,-.5,1),new THREE.Vector4(.5,-.5,-.5,1),new THREE.Vector4(.5,-.5,.5,1),new THREE.Vector4(.5,.5,.5,1),new THREE.Vector4(.5,.5,-.5,1),new THREE.Vector4(.5,.5,-.5,1),new THREE.Vector4(.5,-.5,-.5,1),new THREE.Vector4(.5,-.5,.5,1),new THREE.Vector4(-.5,-.5,.5,1),new THREE.Vector4(-.5,.5,-.5,1),new THREE.Vector4(-.5,.5,.5,1),new THREE.Vector4(-.5,.5,-.5,1),new THREE.Vector4(-.5,-.5,.5,1),new THREE.Vector4(-.5,-.5,-.5,1),new THREE.Vector4(-.5,.5,-.5,1),new THREE.Vector4(.5,.5,.5,1),new THREE.Vector4(-.5,.5,.5,1),new THREE.Vector4(.5,.5,.5,1),new THREE.Vector4(-.5,.5,-.5,1),new THREE.Vector4(.5,.5,-.5,1),new THREE.Vector4(-.5,-.5,-.5,1),new THREE.Vector4(-.5,-.5,.5,1),new THREE.Vector4(.5,-.5,.5,1),new THREE.Vector4(.5,-.5,.5,1),new THREE.Vector4(.5,-.5,-.5,1),new THREE.Vector4(-.5,-.5,-.5,1)],o.vertexColor=[new THREE.Vector3(255,255,255),new THREE.Vector3(255,255,255),new THREE.Vector3(255,255,255),new THREE.Vector3(255,0,0),new THREE.Vector3(0,0,255),new THREE.Vector3(0,255,0),new THREE.Vector3(255,0,0),new THREE.Vector3(255,0,0),new THREE.Vector3(255,0,0),new THREE.Vector3(255,0,0),new THREE.Vector3(0,0,255),new THREE.Vector3(0,255,0),new THREE.Vector3(255,255,0),new THREE.Vector3(255,255,0),new THREE.Vector3(255,255,0),new THREE.Vector3(255,255,0),new THREE.Vector3(255,255,0),new THREE.Vector3(255,255,0),new THREE.Vector3(0,255,255),new THREE.Vector3(0,255,255),new THREE.Vector3(0,255,255),new THREE.Vector3(0,255,255),new THREE.Vector3(0,255,255),new THREE.Vector3(0,255,255),new THREE.Vector3(0,255,255),new THREE.Vector3(0,255,100),new THREE.Vector3(0,255,255),new THREE.Vector3(0,255,255),new THREE.Vector3(0,40,255),new THREE.Vector3(0,255,255),new THREE.Vector3(0,255,255),new THREE.Vector3(0,255,100),new THREE.Vector3(0,255,255),new THREE.Vector3(0,255,255),new THREE.Vector3(0,40,255),new THREE.Vector3(0,255,255)],o.uvList=[new THREE.Vector2(0,0),new THREE.Vector2(0,1),new THREE.Vector2(1,1),new THREE.Vector2(1,1),new THREE.Vector2(1,0),new THREE.Vector2(0,0),new THREE.Vector2(0,0),new THREE.Vector2(1,1),new THREE.Vector2(0,1),new THREE.Vector2(1,1),new THREE.Vector2(0,0),new THREE.Vector2(1,0),new THREE.Vector2(0,0),new THREE.Vector2(0,1),new THREE.Vector2(1,1),new THREE.Vector2(1,1),new THREE.Vector2(1,0),new THREE.Vector2(0,0),new THREE.Vector2(0,0),new THREE.Vector2(1,1),new THREE.Vector2(0,1),new THREE.Vector2(1,1),new THREE.Vector2(0,0),new THREE.Vector2(1,0),new THREE.Vector2(0,0),new THREE.Vector2(1,1),new THREE.Vector2(0,1),new THREE.Vector2(1,1),new THREE.Vector2(0,0),new THREE.Vector2(1,0),new THREE.Vector2(0,0),new THREE.Vector2(0,1),new THREE.Vector2(1,1),new THREE.Vector2(1,1),new THREE.Vector2(1,0),new THREE.Vector2(0,0)],T(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"calculateNormals",o).call(o),T(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"generateMesh",o).call(o),console.log(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(w),R=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();(new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),console.log("this is App constructor!"),this.mainDiv=document.getElementById("mainDiv"),this.canvas=document.getElementById("canvas"),this.canvas.width=this.mainDiv.clientWidth,this.canvas.height=this.mainDiv.clientHeight,this.renderer=new h(this.canvas),this.scene=new p,this.cameraFov=60,this.nearPlane=1,this.farPlane=100,this.aspect=this.canvas.width/this.canvas.height,this.camera=new E(this.cameraFov,this.aspect,this.nearPlane,this.farPlane),this.vextexArray=[new THREE.Vector4(-.5,-.5,0,1),new THREE.Vector4(-.5,.5,0,1),new THREE.Vector4(.5,.5,0,1),new THREE.Vector4(-.5,-.5,0,1),new THREE.Vector4(.5,.5,0,1),new THREE.Vector4(.5,-.5,0,1)],this.vextexColorArray=[new THREE.Vector3(255,0,0),new THREE.Vector3(0,255,0),new THREE.Vector3(0,0,255),new THREE.Vector3(255,0,0),new THREE.Vector3(0,0,255),new THREE.Vector3(0,255,0)],this.planePosition=new THREE.Vector3(0,0,0),this.planeQuaternion=new THREE.Quaternion,this.planeQuaternion.setFromAxisAngle(new THREE.Vector3(1,0,0),0),this.planeMesh=new w(this.planePosition,this.planeQuaternion),this.cubeMesh=new H(this.planePosition,this.planeQuaternion),this.scene.add(this.cubeMesh),console.log(this.cubeMesh),this.renderer.render(this.scene,this.camera),this.addEvent(),this.rotValue=0,this.stats=new Stats,this.stats.domElement.style.position="fixed",this.stats.domElement.style.top="50px",document.body.appendChild(this.stats.domElement),this.controls=new y(this.camera,this.canvas)}return R(e,[{key:"addEvent",value:function(){var e=this;document.onkeydown=function(t){65==t.keyCode&&e.scene.directionOri.applyAxisAngle(new THREE.Vector3(1,0,0),.01);66==t.keyCode&&e.scene.directionOri.applyAxisAngle(new THREE.Vector3(0,1,0),.01);67==t.keyCode&&e.scene.directionOri.applyAxisAngle(new THREE.Vector3(0,0,1),.01)}}},{key:"run",value:function(){var e=this;this.stats.update(),this.renderer.render(this.scene,this.camera),requestAnimationFrame((function(){e.run()}))}}]),e}())).run()}});